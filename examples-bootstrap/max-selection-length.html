<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>maxSelectionLength + Bootstrap 5 - Vanilla Smart Select</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Vanilla Smart Select CSS -->
  <link rel="stylesheet" href="../dist/vanilla-smart-select.css">
</head>
<body>
  <div class="container py-5">
    <h1 class="mb-4">‚õî maxSelectionLength - Limite de Sele√ß√£o</h1>

    <!-- Exemplo 1: Limite de 3 -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title h5">1. Limite de 3 Itens</h2>
        <p class="text-muted">
          Este select permite selecionar no m√°ximo 3 itens. Quando o limite √© atingido,
          uma mensagem √© exibida e novas sele√ß√µes s√£o bloqueadas.
        </p>

        <div class="mb-3">
          <label for="skills" class="form-label">Selecione at√© 3 habilidades:</label>
          <select id="skills" class="form-select" multiple>
            <option value="js">JavaScript</option>
            <option value="py">Python</option>
            <option value="java">Java</option>
            <option value="cpp">C++</option>
            <option value="rust">Rust</option>
            <option value="go">Go</option>
            <option value="php">PHP</option>
            <option value="ruby">Ruby</option>
            <option value="swift">Swift</option>
            <option value="kotlin">Kotlin</option>
          </select>
        </div>

        <div class="alert alert-info" role="alert">
          <strong>Como funciona:</strong>
          <ul class="mb-0 mt-2">
            <li>Tente selecionar mais de 3 itens</li>
            <li>Uma mensagem aparecer√° quando o limite for atingido</li>
            <li>A mensagem desaparece automaticamente ap√≥s 3 segundos</li>
            <li>Remove um item para poder adicionar outro</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Exemplo 2: Limite de 2 -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title h5">2. Limite de 2 Itens</h2>
        <p class="text-muted">
          Exemplo com limite mais restritivo de apenas 2 sele√ß√µes.
        </p>

        <div class="mb-3">
          <label for="frameworks" class="form-label">Selecione at√© 2 frameworks:</label>
          <select id="frameworks" class="form-select" multiple>
            <option value="react">React</option>
            <option value="vue">Vue.js</option>
            <option value="angular">Angular</option>
            <option value="svelte">Svelte</option>
            <option value="nextjs">Next.js</option>
            <option value="nuxt">Nuxt.js</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Exemplo 3: Limite de 5 com Grupos -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title h5">3. Limite de 5 Itens com Grupos</h2>
        <p class="text-muted">
          maxSelectionLength tamb√©m funciona com optgroups.
        </p>

        <div class="mb-3">
          <label for="countries" class="form-label">Selecione at√© 5 pa√≠ses:</label>
          <select id="countries" class="form-select" multiple>
            <optgroup label="Am√©rica do Norte">
              <option value="us">Estados Unidos</option>
              <option value="ca">Canad√°</option>
              <option value="mx">M√©xico</option>
            </optgroup>
            <optgroup label="Am√©rica do Sul">
              <option value="br">Brasil</option>
              <option value="ar">Argentina</option>
              <option value="cl">Chile</option>
              <option value="co">Col√¥mbia</option>
            </optgroup>
            <optgroup label="Europa">
              <option value="uk">Reino Unido</option>
              <option value="fr">Fran√ßa</option>
              <option value="de">Alemanha</option>
              <option value="it">It√°lia</option>
              <option value="es">Espanha</option>
            </optgroup>
            <optgroup label="√Åsia">
              <option value="jp">Jap√£o</option>
              <option value="cn">China</option>
              <option value="kr">Coreia do Sul</option>
              <option value="in">√çndia</option>
            </optgroup>
          </select>
        </div>
      </div>
    </div>

    <!-- Exemplo 4: Sem Limite -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title h5">4. Sem Limite (Padr√£o)</h2>
        <p class="text-muted">
          Quando <code>maximumSelectionLength: 0</code> (padr√£o), n√£o h√° limite de sele√ß√£o.
        </p>

        <div class="mb-3">
          <label for="colors" class="form-label">Selecione quantas cores quiser:</label>
          <select id="colors" class="form-select" multiple>
            <option value="red">Vermelho</option>
            <option value="blue">Azul</option>
            <option value="green">Verde</option>
            <option value="yellow">Amarelo</option>
            <option value="purple">Roxo</option>
            <option value="orange">Laranja</option>
            <option value="pink">Rosa</option>
            <option value="brown">Marrom</option>
          </select>
        </div>

        <div class="alert alert-info" role="alert">
          <strong>Dica:</strong> Compare este exemplo (sem limite) com os anteriores (com limite)
          para ver a diferen√ßa de comportamento.
        </div>
      </div>
    </div>

    <!-- Exemplo 5: Event Listener -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title h5">5. Escutando o Evento de Limite Atingido</h2>
        <p class="text-muted">
          Voc√™ pode escutar o evento <code>vs:selectionLimitReached</code> para executar
          a√ß√µes customizadas quando o limite for atingido.
        </p>

        <div class="mb-3">
          <label for="tags" class="form-label">Selecione at√© 4 tags:</label>
          <select id="tags" class="form-select" multiple>
            <option value="frontend">Frontend</option>
            <option value="backend">Backend</option>
            <option value="database">Database</option>
            <option value="devops">DevOps</option>
            <option value="mobile">Mobile</option>
            <option value="desktop">Desktop</option>
            <option value="web">Web</option>
            <option value="api">API</option>
          </select>
        </div>

        <div id="event-log" class="border rounded p-3 bg-light" style="font-family: monospace; font-size: 13px; min-height: 80px;">
          <div class="text-muted">Os eventos aparecer√£o aqui...</div>
        </div>

        <div class="alert alert-primary mt-3" role="alert">
          <strong>C√≥digo do evento:</strong>
          <pre class="bg-light p-2 rounded mt-2 mb-0" style="overflow-x: auto;"><code>element.addEventListener('vs:selectionLimitReached', (e) => {
  console.log('Limite atingido!');
  console.log('M√°ximo:', e.detail.maximum);
  console.log('Mensagem:', e.detail.message);
});</code></pre>
        </div>
      </div>
    </div>

    <!-- Resumo da API -->
    <div class="card mb-4">
      <div class="card-body">
        <h2 class="card-title h5">üìö Resumo da API</h2>

        <h3 class="h6 mt-4">Configura√ß√£o:</h3>
        <pre class="bg-light p-3 rounded" style="overflow-x: auto;"><code>new VanillaSmartSelect('#mySelect', {
  multiple: true,
  maximumSelectionLength: 3  // 0 = sem limite (padr√£o)
});</code></pre>

        <h3 class="h6 mt-4">Evento:</h3>
        <pre class="bg-light p-3 rounded" style="overflow-x: auto;"><code>element.addEventListener('vs:selectionLimitReached', (e) => {
  // e.detail.maximum - n√∫mero m√°ximo permitido
  // e.detail.message - mensagem de erro
});</code></pre>

        <h3 class="h6 mt-4">Mensagem Customizada (i18n):</h3>
        <pre class="bg-light p-3 rounded mb-0" style="overflow-x: auto;"><code>new VanillaSmartSelect('#mySelect', {
  multiple: true,
  maximumSelectionLength: 3,
  language: {
    maximumSelected: (args) =>
      `Voc√™ s√≥ pode selecionar ${args.maximum} itens!`
  }
});</code></pre>
      </div>
    </div>

  </div>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Vanilla Smart Select JS -->
  <script src="../dist/vanilla-smart-select.js"></script>

  <script>
    // Exemplo 1: Limite de 3 itens
    new VanillaSmartSelect('#skills', {
      searchable: true,
      maximumSelectionLength: 3
    });

    // Exemplo 2: Limite de 2 itens
    new VanillaSmartSelect('#frameworks', {
      searchable: true,
      maximumSelectionLength: 2
    });

    // Exemplo 3: Limite de 5 itens com grupos
    new VanillaSmartSelect('#countries', {
      searchable: true,
      maximumSelectionLength: 5
    });

    // Exemplo 4: Sem limite (padr√£o)
    new VanillaSmartSelect('#colors', {
      searchable: true,
      maximumSelectionLength: 0
    });

    // Exemplo 5: Com event listener
    const tagsElement = document.getElementById('tags');
    const eventLog = document.getElementById('event-log');

    new VanillaSmartSelect('#tags', {
      searchable: true,
      maximumSelectionLength: 4
    });

    // Escutar evento de limite atingido
    tagsElement.addEventListener('vs:selectionLimitReached', (e) => {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.className = 'mb-2';
      logEntry.innerHTML = `
        <strong class="text-warning">[${timestamp}] Limite Atingido!</strong><br>
        <span class="text-muted">M√°ximo: ${e.detail.maximum} | Mensagem: "${e.detail.message}"</span>
      `;

      const placeholder = eventLog.querySelector('.text-muted:first-child');
      if (placeholder && placeholder.textContent === 'Os eventos aparecer√£o aqui...') {
        placeholder.remove();
      }

      eventLog.insertBefore(logEntry, eventLog.firstChild);
    });

    // Log de sele√ß√µes para compara√ß√£o
    tagsElement.addEventListener('vs:select', (e) => {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.className = 'mb-2';
      logEntry.innerHTML = `
        <strong class="text-success">[${timestamp}] Selecionado:</strong>
        <span class="text-muted">${e.detail.data.text}</span>
      `;

      const placeholder = eventLog.querySelector('.text-muted:first-child');
      if (placeholder && placeholder.textContent === 'Os eventos aparecer√£o aqui...') {
        placeholder.remove();
      }

      eventLog.insertBefore(logEntry, eventLog.firstChild);
    });

    console.log('‚úì maxSelectionLength exemplos inicializados!');
  </script>
</body>
</html>
