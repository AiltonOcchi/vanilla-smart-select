<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modal + Bootstrap 5 - Vanilla Smart Select</title>
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Vanilla Smart Select CSS -->
  <link rel="stylesheet" href="../dist/vanilla-smart-select.css">
  
  <style>
    body {
      padding: 40px 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .hero {
      text-align: center;
      color: white;
      margin-bottom: 40px;
    }
    
    .hero h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    .hero p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .demo-card {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    
    .btn-custom {
      padding: 12px 30px;
      font-size: 1.1rem;
      border-radius: 8px;
    }
    
    .modal-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 0;
    }
    
    .modal-header .btn-close {
      filter: brightness(0) invert(1);
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <div class="hero">
    <div class="container">
      <h1>ğŸ¯ Select em Modal do Bootstrap</h1>
      <p>DemonstraÃ§Ã£o do Vanilla Smart Select funcionando dentro de modais</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="demo-card">
          <h2 class="mb-4">Clique nos botÃµes para abrir os modais</h2>
          
          <div class="d-grid gap-3">
            <!-- BotÃ£o Modal 1 - SeleÃ§Ã£o Simples -->
            <button type="button" class="btn btn-primary btn-custom" data-bs-toggle="modal" data-bs-target="#modal1">
              ğŸ“ Modal 1: SeleÃ§Ã£o Simples
            </button>
            
            <!-- BotÃ£o Modal 2 - Multi-seleÃ§Ã£o -->
            <button type="button" class="btn btn-success btn-custom" data-bs-toggle="modal" data-bs-target="#modal2">
              âœ… Modal 2: Multi-seleÃ§Ã£o
            </button>
            
            <!-- BotÃ£o Modal 3 - Com AJAX -->
            <button type="button" class="btn btn-info btn-custom" data-bs-toggle="modal" data-bs-target="#modal3">
              ğŸŒ Modal 3: Busca de PaÃ­ses (AJAX)
            </button>
            
            <!-- BotÃ£o Modal 4 - FormulÃ¡rio Completo -->
            <button type="button" class="btn btn-warning btn-custom" data-bs-toggle="modal" data-bs-target="#modal4">
              ğŸ“‹ Modal 4: FormulÃ¡rio Completo
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal 1: SeleÃ§Ã£o Simples -->
  <div class="modal fade" id="modal1" tabindex="-1" aria-labelledby="modal1Label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal1Label">ğŸ“ SeleÃ§Ã£o Simples</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p class="text-muted">Selecione uma opÃ§Ã£o da lista:</p>
          
          <div class="mb-3">
            <label for="select1" class="form-label">Escolha um paÃ­s:</label>
            <select id="select1" class="form-select">
              <option value="">Selecione...</option>
              <option value="br">ğŸ‡§ğŸ‡· Brasil</option>
              <option value="pt">ğŸ‡µğŸ‡¹ Portugal</option>
              <option value="us">ğŸ‡ºğŸ‡¸ Estados Unidos</option>
              <option value="uk">ğŸ‡¬ğŸ‡§ Reino Unido</option>
              <option value="es">ğŸ‡ªğŸ‡¸ Espanha</option>
              <option value="fr">ğŸ‡«ğŸ‡· FranÃ§a</option>
              <option value="de">ğŸ‡©ğŸ‡ª Alemanha</option>
              <option value="it">ğŸ‡®ğŸ‡¹ ItÃ¡lia</option>
              <option value="jp">ğŸ‡¯ğŸ‡µ JapÃ£o</option>
              <option value="cn">ğŸ‡¨ğŸ‡³ China</option>
            </select>
          </div>
          
          <div class="alert alert-info" role="alert">
            <strong>SeleÃ§Ã£o atual:</strong> <span id="selection1">Nenhuma</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-primary" onclick="getSelection('select1', 'selection1')">Mostrar SeleÃ§Ã£o</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal 2: Multi-seleÃ§Ã£o -->
  <div class="modal fade" id="modal2" tabindex="-1" aria-labelledby="modal2Label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal2Label">âœ… Multi-seleÃ§Ã£o</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p class="text-muted">Selecione mÃºltiplas linguagens de programaÃ§Ã£o:</p>
          
          <div class="mb-3">
            <label for="select2" class="form-label">Linguagens que vocÃª conhece:</label>
            <select id="select2" class="form-select" multiple>
              <option value="js">JavaScript</option>
              <option value="py">Python</option>
              <option value="java">Java</option>
              <option value="cpp">C++</option>
              <option value="cs">C#</option>
              <option value="php">PHP</option>
              <option value="ruby">Ruby</option>
              <option value="go">Go</option>
              <option value="rust">Rust</option>
              <option value="swift">Swift</option>
              <option value="kotlin">Kotlin</option>
              <option value="ts">TypeScript</option>
            </select>
          </div>
          
          <div class="alert alert-success" role="alert">
            <strong>SeleÃ§Ãµes:</strong> <span id="selection2">Nenhuma</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-success" onclick="getSelection('select2', 'selection2')">Mostrar SeleÃ§Ãµes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal 3: Com AJAX -->
  <div class="modal fade" id="modal3" tabindex="-1" aria-labelledby="modal3Label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal3Label">ğŸŒ Busca de PaÃ­ses (AJAX)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p class="text-muted">Digite para buscar paÃ­ses pela API REST Countries:</p>
          
          <div class="mb-3">
            <label for="select3" class="form-label">Buscar paÃ­s:</label>
            <select id="select3" class="form-select">
              <option value="">Digite para buscar...</option>
            </select>
          </div>
          
          <div class="alert alert-info" role="alert">
            <strong>PaÃ­s selecionado:</strong> <span id="selection3">Nenhum</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-info" onclick="getSelection('select3', 'selection3')">Mostrar SeleÃ§Ã£o</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal 4: FormulÃ¡rio Completo -->
  <div class="modal fade" id="modal4" tabindex="-1" aria-labelledby="modal4Label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modal4Label">ğŸ“‹ FormulÃ¡rio de Cadastro</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="cadastroForm">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="nome" class="form-label">Nome:</label>
                <input type="text" class="form-control" id="nome" placeholder="Seu nome" required>
              </div>
              
              <div class="col-md-6 mb-3">
                <label for="email" class="form-label">Email:</label>
                <input type="email" class="form-control" id="email" placeholder="seu@email.com" required>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="select4" class="form-label">PaÃ­s:</label>
                <select id="select4" class="form-select" required>
                  <option value="">Selecione...</option>
                  <option value="br">ğŸ‡§ğŸ‡· Brasil</option>
                  <option value="pt">ğŸ‡µğŸ‡¹ Portugal</option>
                  <option value="us">ğŸ‡ºğŸ‡¸ Estados Unidos</option>
                  <option value="ar">ğŸ‡¦ğŸ‡· Argentina</option>
                  <option value="mx">ğŸ‡²ğŸ‡½ MÃ©xico</option>
                  <option value="es">ğŸ‡ªğŸ‡¸ Espanha</option>
                </select>
              </div>
              
              <div class="col-md-6 mb-3">
                <label for="select5" class="form-label">Interesses:</label>
                <select id="select5" class="form-select" multiple required>
                  <option value="tech">Tecnologia</option>
                  <option value="sports">Esportes</option>
                  <option value="music">MÃºsica</option>
                  <option value="art">Arte</option>
                  <option value="travel">Viagens</option>
                  <option value="food">Gastronomia</option>
                </select>
              </div>
            </div>
            
            <div class="mb-3">
              <label for="mensagem" class="form-label">Mensagem:</label>
              <textarea class="form-control" id="mensagem" rows="3" placeholder="Deixe uma mensagem..."></textarea>
            </div>
            
            <div class="alert alert-warning d-none" id="formResult" role="alert"></div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-warning" onclick="submitForm()">Enviar FormulÃ¡rio</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Vanilla Smart Select JS -->
  <script src="../dist/vanilla-smart-select.js"></script>
  
  <script>
    // Inicializar os selects quando os modais forem mostrados
    let select1Instance, select2Instance, select3Instance, select4Instance, select5Instance;

    // Modal 1: SeleÃ§Ã£o Simples - Inicializa ANTES do modal abrir
    document.getElementById('modal1').addEventListener('show.bs.modal', function () {
      if (!select1Instance) {
        select1Instance = new VanillaSmartSelect('#select1', {
          placeholder: 'Escolha um paÃ­s...',
          searchable: true,
          language: 'pt-BR'
        });

        select1Instance.on('vs:select', function(data) {
          document.getElementById('selection1').textContent = data.data.text;
        });

        select1Instance.on('vs:clear', function() {
          document.getElementById('selection1').textContent = 'Nenhuma';
        });
      }
    });

    // Modal 2: Multi-seleÃ§Ã£o - Inicializa ANTES do modal abrir
    document.getElementById('modal2').addEventListener('show.bs.modal', function () {
      if (!select2Instance) {
        select2Instance = new VanillaSmartSelect('#select2', {
          placeholder: 'Selecione as linguagens...',
          searchable: true,
          multiple: true,
          language: 'pt-BR',
          maximumSelectionLength: 5
        });

        function updateSelection2() {
          const selected = select2Instance.getSelected();
          if (selected.length === 0) {
            document.getElementById('selection2').textContent = 'Nenhuma';
          } else {
            document.getElementById('selection2').textContent = selected.map(item => item.text).join(', ');
          }
        }

        select2Instance.on('vs:select', updateSelection2);
        select2Instance.on('vs:unselect', updateSelection2);
        select2Instance.on('vs:clear', updateSelection2);
      }
    });

    // Modal 3: Com AJAX - Inicializa ANTES do modal abrir
    document.getElementById('modal3').addEventListener('show.bs.modal', function () {
      if (!select3Instance) {
        select3Instance = new VanillaSmartSelect('#select3', {
          placeholder: 'Digite para buscar paÃ­ses...',
          searchable: true,
          language: 'pt-BR',
          ajax: {
            url: 'https://restcountries.com/v3.1/name',
            method: 'GET',
            delay: 300,
            data: function(params) {
              return {
                term: params.term || 'brazil'
              };
            },
            transport: function(params, config) {
              const searchTerm = params.term || 'brazil';
              const url = `${config.url}/${searchTerm}`;
              
              return fetch(url)
                .then(response => {
                  if (!response.ok) {
                    throw new Error('Network response was not ok');
                  }
                  return response.json();
                })
                .catch(error => {
                  console.error('Error:', error);
                  return [];
                });
            },
            processResults: function(data) {
              if (!Array.isArray(data)) {
                return { results: [] };
              }
              
              const results = data.map(country => ({
                id: country.cca3,
                text: `${country.flag} ${country.name.common}`,
                capital: country.capital ? country.capital[0] : 'N/A',
                population: country.population
              }));
              
              return { results: results };
            }
          },
          templateResult: function(item) {
            if (!item.capital) {
              return item.text;
            }
            
            const div = document.createElement('div');
            div.innerHTML = `
              <div style="padding: 5px 0;">
                <div style="font-weight: 500;">${item.text}</div>
                <small style="color: #6c757d;">Capital: ${item.capital} | PopulaÃ§Ã£o: ${(item.population / 1000000).toFixed(1)}M</small>
              </div>
            `;
            return div;
          }
        });

        select3Instance.on('vs:select', function(data) {
          document.getElementById('selection3').textContent = data.data.text;
        });
      }
    });

    // Modal 4: FormulÃ¡rio Completo - Inicializa ANTES do modal abrir
    document.getElementById('modal4').addEventListener('show.bs.modal', function () {
      if (!select4Instance) {
        select4Instance = new VanillaSmartSelect('#select4', {
          placeholder: 'Selecione seu paÃ­s...',
          searchable: true,
          language: 'pt-BR',
          allowClear: true
        });
      }

      if (!select5Instance) {
        select5Instance = new VanillaSmartSelect('#select5', {
          placeholder: 'Selecione seus interesses...',
          searchable: true,
          multiple: true,
          language: 'pt-BR',
          maximumSelectionLength: 3
        });
      }
    });

    // FunÃ§Ã£o auxiliar para mostrar seleÃ§Ã£o
    function getSelection(selectId, displayId) {
      const selectElement = document.getElementById(selectId);
      const instance = selectElement._vanillaSmartSelect;
      
      if (instance) {
        const selected = instance.getSelected();
        const displayElement = document.getElementById(displayId);
        
        if (Array.isArray(selected)) {
          displayElement.textContent = selected.length > 0 
            ? selected.map(item => item.text).join(', ')
            : 'Nenhuma';
        } else if (selected) {
          displayElement.textContent = selected.text;
        } else {
          displayElement.textContent = 'Nenhuma';
        }
      }
    }

    // FunÃ§Ã£o para enviar formulÃ¡rio
    function submitForm() {
      const form = document.getElementById('cadastroForm');
      const resultDiv = document.getElementById('formResult');
      
      if (form.checkValidity()) {
        const nome = document.getElementById('nome').value;
        const email = document.getElementById('email').value;
        const pais = select4Instance.getSelected();
        const interesses = select5Instance.getSelected();
        
        resultDiv.className = 'alert alert-success';
        resultDiv.textContent = `FormulÃ¡rio enviado com sucesso! Nome: ${nome}, PaÃ­s: ${pais ? pais.text : 'N/A'}, Interesses: ${interesses.map(i => i.text).join(', ')}`;
        resultDiv.classList.remove('d-none');
        
        // Limpar apÃ³s 5 segundos
        setTimeout(() => {
          form.reset();
          select4Instance.clear();
          select5Instance.clear();
          resultDiv.classList.add('d-none');
        }, 5000);
      } else {
        resultDiv.className = 'alert alert-danger';
        resultDiv.textContent = 'Por favor, preencha todos os campos obrigatÃ³rios!';
        resultDiv.classList.remove('d-none');
        form.reportValidity();
      }
    }

    console.log('âœ“ Modal examples ready!');
  </script>
</body>
</html>
