<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="AJAX B√°sico no Vanilla Smart Select - Carregamento de dados remotos">
  <title>AJAX B√°sico - Vanilla Smart Select</title>
  <link rel="stylesheet" href="../css/docs.css">
  <link rel="stylesheet" href="../css/vanilla-smart-select.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
  <div class="docs-container">
    <aside class="docs-sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <div class="sidebar-logo-icon">VS</div>
          <div class="sidebar-logo-text">
            <div class="sidebar-logo-title">Vanilla Smart Select</div>
            <div class="sidebar-logo-subtitle">v1.0.1</div>
          </div>
        </a>
      </div>

      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Introdu√ß√£o</div>
          <ul class="nav-links">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="getting-started.html" class="nav-link">Getting Started</a></li>
          </ul>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">Recursos</div>
          <ul class="nav-links">
            <li><a href="api-reference.html" class="nav-link">API Reference</a></li>
            <li><a href="configuration.html" class="nav-link">Configura√ß√£o</a></li>
            <li><a href="events.html" class="nav-link">Eventos</a></li>
          </ul>
        </div>
        <div class="nav-section">
          <div class="nav-section-title">Exemplos</div>
          <ul class="nav-links">
            <li><a href="example-basic.html" class="nav-link">B√°sico</a></li>
            <li><a href="example-api-programmatic.html" class="nav-link">API Program√°tica</a></li>
            <li><a href="example-ajax-basic.html" class="nav-link active">AJAX B√°sico</a></li>
            <li><a href="example-tags.html" class="nav-link">Tags</a></li>
            <li><a href="example-pagination.html" class="nav-link">Pagina√ß√£o</a></li>
            <li><a href="example-max-selection.html" class="nav-link">Limite de Sele√ß√£o</a></li>
            <li><a href="example-validation.html" class="nav-link">Valida√ß√£o Avan√ßada</a></li>
            <li><a href="example-templates.html" class="nav-link">Templates</a></li>
            <li><a href="example-i18n.html" class="nav-link">i18n</a></li>
            <li><a href="example-bootstrap.html" class="nav-link">Bootstrap</a></li>
          </ul>
        </div>
      </nav>
    </aside>

    <main class="docs-main">
      <header class="docs-topbar">
        <button class="mobile-menu-toggle" aria-label="Toggle menu">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
        <div class="topbar-actions">
          <div class="language-switcher">
            <a href="example-ajax-basic.html" class="lang-link active">üáßüá∑ PT</a>
            <span class="lang-separator">|</span>
            <a href="../en/example-ajax-basic.html" class="lang-link">üá∫üá∏ EN</a>
          </div>
          <a href="https://github.com/ailtonocchi/vanilla-smart-select" class="topbar-btn" target="_blank" rel="noopener noreferrer">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            GitHub
          </a>
        </div>
      </header>

      <div class="docs-content">
        <section class="section-mb-lg">
          <p class="lead">
            Integre com APIs externas usando AJAX/Fetch para carregar dados remotos dinamicamente.
            Suporte completo a debounce, cache, templates customizados e tratamento de erros.
          </p>          
        </section>

        <!-- Example 1: REST Countries -->
        <section class="section-mb-lg">
          <h2>REST Countries API</h2>
          <p>Busca de pa√≠ses em tempo real usando a API p√∫blica REST Countries.</p>

          <div class="demo-container">
            <label for="countries" class="demo-label">Buscar pa√≠ses:</label>
            <select id="countries" class="demo-select"></select>

            <div id="country-result" class="code-details" style="display: none; margin-top: 15px;">
              <strong>Pa√≠s Selecionado:</strong>
              <pre id="country-data" style="margin-top: 10px; background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; color: #ccc; font-size: 0.75rem;"></pre>
            </div>

            <details class="code-details">
              <summary>Ver c√≥digo</summary>
              
              <h3>HTML</h3>
              <pre><code class="language-html">&lt;select id="countries"&gt;&lt;/select&gt;</code></pre>

              <h3>JavaScript</h3>
              <pre><code class="language-javascript">const countriesSelect = new VanillaSmartSelect('#countries', {
  placeholder: 'Digite para buscar pa√≠ses...',
  allowClear: true,
  ajax: {
    url: 'https://restcountries.com/v3.1/name',
    delay: 300,
    transport: (params, config) => {
      const searchTerm = params.term || 'brazil';
      const url = `${config.url}/${encodeURIComponent(searchTerm)}`;
      
      const abortController = new AbortController();
      const fetchPromise = fetch(url, {
        signal: abortController.signal
      }).then(response => response.json());
      
      fetchPromise.abort = () => abortController.abort();
      return fetchPromise;
    },
    processResults: (data) => {
      const results = data.map(country => ({
        id: country.cca3,
        text: country.name.common,
        flag: country.flag,
        capital: country.capital?.[0],
        population: country.population
      }));
      return { results };
    }
  },
  templateResult: (item) => {
    return `
      &lt;div style="display: flex; gap: 10px;"&gt;
        &lt;span&gt;${item.flag}&lt;/span&gt;
        &lt;div&gt;
          &lt;div&gt;${item.text}&lt;/div&gt;
          &lt;small&gt;Capital: ${item.capital}&lt;/small&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `;
  }
});</code></pre>
            </details>
          </div>

        </section>

        <!-- Example 2: ViaCEP -->
        <section class="section-mb-lg">
          <h2>ViaCEP - Busca de CEP</h2>
          <p>Busca de endere√ßos brasileiros por CEP usando a API ViaCEP.</p>

          <div class="demo-container">
            <label for="cep" class="demo-label">Digite um CEP (ex: 01310-100):</label>
            <select id="cep" class="demo-select"></select>

            <div id="cep-result" class="code-details" style="display: none; margin-top: 15px;">
              <strong>Endere√ßo Encontrado:</strong>
              <pre id="cep-data" style="margin-top: 10px; background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; color: #ccc; font-size: 0.75rem;"></pre>
            </div>

            <details class="code-details">
              <summary>Ver c√≥digo</summary>
              
              <h3>HTML</h3>
              <pre><code class="language-html">&lt;select id="cep"&gt;&lt;/select&gt;</code></pre>
              <h3>JavaScript</h3>
              <pre><code class="language-javascript">const cepSelect = new VanillaSmartSelect('#cep', {
  placeholder: 'Digite um CEP para buscar...',
  allowClear: true,
  ajax: {
    url: 'https://viacep.com.br/ws',
    delay: 400,
    transport: (params, config) => {
      const cep = (params.term || '').replace(/\D/g, '');
      if (cep.length < 8) return Promise.resolve([]);
      
      const url = `${config.url}/${cep}/json/`;
      return fetch(url)
        .then(response => response.json())
        .then(data => data.erro ? [] : [data]);
    },
    processResults: (data) => {
      const results = data.map(address => ({
        id: address.cep,
        text: `${address.cep} - ${address.logradouro}`,
        logradouro: address.logradouro,
        bairro: address.bairro,
        localidade: address.localidade,
        uf: address.uf
      }));
      return { results };
    }
  }
});</code></pre>
            </details>
          </div>
        </section>


        <!-- Example 3: Simulated -->
        <section class="section-mb-lg">
          <h2>Busca de Filmes (Simulado)</h2>
          <p>Exemplo de busca com dados locais simulando uma API de filmes.</p>

          <div class="demo-container">
            <label for="movies" class="demo-label">Buscar filmes:</label>
            <select id="movies" class="demo-select"></select>

            <div id="movie-result" class="code-details" style="display: none; margin-top: 15px;">
              <strong>Filme Selecionado:</strong>
              <pre id="movie-data" style="margin-top: 10px; background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; color: #ccc; font-size: 0.75rem;"></pre>
            </div>

            <details class="code-details">
              <summary>Ver c√≥digo</summary>
              
              <h3>HTML</h3>
              <pre><code class="language-html">&lt;select id="movies"&gt;&lt;/select&gt;</code></pre>

              <h3>JavaScript</h3>
              <pre><code class="language-javascript">const moviesSelect = new VanillaSmartSelect('#movies', {
  placeholder: 'Digite para buscar filmes...',
  allowClear: true,
  ajax: {
    delay: 300,
    transport: (params) => {
      return new Promise((resolve) => {
        setTimeout(() => {
          const term = (params.term || '').toLowerCase();
          const filtered = moviesDatabase.filter(movie =>
            movie.title.toLowerCase().includes(term)
          );
          resolve(filtered);
        }, 500);
      });
    },
    processResults: (data) => {
      return {
        results: data.map(movie => ({
          id: movie.id,
          text: movie.title,
          year: movie.year,
          genre: movie.genre,
          rating: movie.rating
        }))
      };
    }
  },
  templateResult: (item) => {
    return `
      &lt;div style="display: flex; justify-content: space-between;"&gt;
        &lt;div&gt;
          &lt;div&gt;üé¨ ${item.text}&lt;/div&gt;
          &lt;small&gt;${item.year} ‚Ä¢ ${item.genre}&lt;/small&gt;
        &lt;/div&gt;
        &lt;span style="background: #ffc107; padding: 4px 8px; border-radius: 4px;"&gt;
          ‚≠ê ${item.rating}
        &lt;/span&gt;
      &lt;/div&gt;
    `;
  }
});</code></pre>
            </details>
          </div>

        </section>

        <!-- Example 4: Headers Customizados -->
        <section class="section-mb-lg">
          <h2>Headers Customizados</h2>
          <p>Configure headers HTTP customizados, incluindo autentica√ß√£o Bearer e Content-Type.</p>

          <div class="demo-container">
            <label for="auth-api" class="demo-label">API com Autentica√ß√£o:</label>
            <select id="auth-api" class="demo-select"></select>

            <div id="auth-result" class="code-details" style="display: none; margin-top: 15px;">
              <strong>Resultado:</strong>
              <pre id="auth-data" style="margin-top: 10px; background: #2d2d2d; padding: 10px; border-radius: 4px; overflow-x: auto; color: #ccc; font-size: 0.75rem;"></pre>
            </div>

            <details class="code-details">
              <summary>Ver c√≥digo</summary>
              
              <h3>HTML</h3>
              <pre><code class="language-html">&lt;select id="auth-api"&gt;&lt;/select&gt;</code></pre>

              <h3>JavaScript</h3>
              <pre><code class="language-javascript">const authSelect = new VanillaSmartSelect('#auth-api', {
  placeholder: 'Buscar dados autenticados...',
  ajax: {
    url: 'https://api.example.com/data',
    delay: 300,
    transport: (params, config) => {
      const abortController = new AbortController();

      const fetchPromise = fetch(config.url, {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer YOUR_TOKEN_HERE',
          'Content-Type': 'application/json',
          'X-Custom-Header': 'CustomValue'
        },
        body: JSON.stringify({
          query: params.term,
          limit: 20
        }),
        signal: abortController.signal
      })
        .then(response => {
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return response.json();
        });

      fetchPromise.abort = () => abortController.abort();
      return fetchPromise;
    },
    processResults: (data) => {
      return {
        results: data.results.map(item => ({
          id: item.id,
          text: item.name
        }))
      };
    }
  }
});</code></pre>
            </details>
          </div>

        </section>

        <!-- Example 5: Tratamento de Erros -->
        <section class="section-mb-lg">
          <h2>Tratamento de Erros</h2>
          <p>Monitore e trate erros de requisi√ß√µes AJAX usando eventos customizados.</p>

          <div class="demo-container">
            <label for="error-demo" class="demo-label">Testar Erro de API:</label>
            <select id="error-demo" class="demo-select"></select>

            <div id="error-log" style="margin-top: 15px; padding: 15px; background: #ffe4e1; border-left: 4px solid #ff6b6b; border-radius: 4px; display: none;">
              <strong style="color: #c92a2a;">‚ö†Ô∏è Erro detectado:</strong>
              <pre id="error-message" style="margin-top: 8px; color: #c92a2a; font-size: 13px; white-space: pre-wrap;"></pre>
            </div>

            <div id="success-log" style="margin-top: 15px; padding: 15px; background: #d3f9d8; border-left: 4px solid #51cf66; border-radius: 4px; display: none;">
              <strong style="color: #2f9e44;">‚úì Requisi√ß√£o bem-sucedida:</strong>
              <pre id="success-message" style="margin-top: 8px; color: #2f9e44; font-size: 13px; white-space: pre-wrap;"></pre>
            </div>

            <details class="code-details">
              <summary>Ver c√≥digo</summary>
              
              <h3>HTML</h3>
              <pre><code class="language-html">&lt;select id="error-demo"&gt;&lt;/select&gt;</code></pre>

              <h3>JavaScript</h3>
              <pre><code class="language-javascript">const errorSelect = new VanillaSmartSelect('#error-demo', {
  placeholder: 'Digite para testar...',
  ajax: {
    url: 'https://api.invalid-domain-example-12345.com/search',
    delay: 300,
    transport: (params, config) => {
      const abortController = new AbortController();

      const fetchPromise = fetch(config.url, {
        signal: abortController.signal
      })
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }
          return response.json();
        });

      fetchPromise.abort = () => abortController.abort();
      return fetchPromise;
    }
  }
});

// Monitorar eventos
const selectElement = document.getElementById('error-demo');</code></pre>
            </details>
          </div>


selectElement.addEventListener('vs:ajaxLoading', (e) => {
  console.log('üîÑ Carregando...', e.detail);
});

selectElement.addEventListener('vs:ajaxSuccess', (e) => {
  console.log('‚úÖ Sucesso!', e.detail.data);
  alert('Dados carregados com sucesso!');
});

selectElement.addEventListener('vs:ajaxError', (e) => {
  console.error('‚ùå Erro ao carregar:', e.detail.error);
  alert(`Erro: ${e.detail.error.message}`);
});</code></pre>
        </section>

      
        <!-- Events -->
        <section class="section-mb-lg">
          <h2>Eventos AJAX</h2>
          <p>Monitore o estado das requisi√ß√µes usando eventos:</p>

          <h3>JavaScript</h3>
          <pre><code class="language-javascript">// Eventos dispon√≠veis
selectElement.addEventListener('vs:ajaxLoading', (e) => {
  console.log('Carregando...', e.detail);
});

selectElement.addEventListener('vs:ajaxSuccess', (e) => {
  console.log('Sucesso!', e.detail);
});

selectElement.addEventListener('vs:ajaxError', (e) => {
  console.error('Erro:', e.detail);
});</code></pre>
        </section>


          <!-- Features -->
        <section class="section-mb-lg">
          <h2>Recursos Implementados</h2>
          <ul>
            <li>‚úÖ Carregamento ass√≠ncrono via fetch API</li>
            <li>‚úÖ Debounce autom√°tico para evitar requisi√ß√µes excessivas</li>
            <li>‚úÖ Transport customizado para controle total das requisi√ß√µes</li>
            <li>‚úÖ Busca remota com par√¢metros din√¢micos</li>
            <li>‚úÖ Indicador de carregamento</li>
            <li>‚úÖ Tratamento de erros com mensagens customizadas</li>
            <li>‚úÖ Templates customizados para resultados</li>
            <li>‚úÖ Suporte a AbortController para cancelar requisi√ß√µes</li>
            <li>‚úÖ Headers HTTP customizados (Authorization, Content-Type)</li>
            <li>‚úÖ Eventos de sucesso e erro para monitoramento</li>
          </ul>
        </section>

      </div>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="../js/vanilla-smart-select.min.js"></script>
  <script src="../js/docs.js"></script>

  <!-- Initialize AJAX examples -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        const VanillaSmartSelectClass = VanillaSmartSelect.default || VanillaSmartSelect;

        // Example 1: REST Countries API
        const countriesSelect = new VanillaSmartSelectClass('#countries', {
          placeholder: 'Digite para buscar pa√≠ses...',
          allowClear: true,
          ajax: {
            url: 'https://restcountries.com/v3.1/name',
            delay: 300,
            transport: (params, config) => {
              const searchTerm = params.term || 'brazil';
              const url = `${config.url}/${encodeURIComponent(searchTerm)}`;
              const abortController = new AbortController();

              const fetchPromise = fetch(url, {
                signal: abortController.signal
              })
                .then(response => {
                  if (!response.ok) {
                    if (response.status === 404) return [];
                    throw new Error(`HTTP error! status: ${response.status}`);
                  }
                  return response.json();
                });

              fetchPromise.abort = () => abortController.abort();
              return fetchPromise;
            },
            processResults: (data) => {
              if (!Array.isArray(data)) return { results: [] };

              const results = data.map(country => ({
                id: country.cca3,
                text: country.name.common,
                flag: country.flag,
                capital: country.capital ? country.capital[0] : 'N/A',
                population: country.population,
                region: country.region
              }));

              return { results };
            }
          },
          templateResult: (item) => {
            const div = document.createElement('div');
            div.style.display = 'flex';
            div.style.alignItems = 'center';
            div.style.gap = '10px';
            div.innerHTML = `
              <span style="font-size: 24px;">${item.flag || 'üåç'}</span>
              <div style="flex: 1;">
                <div style="font-weight: 500;">${item.text}</div>
                ${item.capital ? `<div style="font-size: 12px; color: #666;">Capital: ${item.capital}</div>` : ''}
              </div>
            `;
            return div;
          },
          templateSelection: (item) => {
            return `${item.flag || 'üåç'} ${item.text}`;
          }
        });

        document.getElementById('countries').addEventListener('vs:select', (e) => {
          const resultDiv = document.getElementById('country-result');
          const dataDiv = document.getElementById('country-data');
          resultDiv.style.display = 'block';
          dataDiv.textContent = JSON.stringify(e.detail.data, null, 2);
        });

        // Example 2: ViaCEP API
        const cepSelect = new VanillaSmartSelectClass('#cep', {
          placeholder: 'Digite um CEP para buscar...',
          allowClear: true,
          ajax: {
            url: 'https://viacep.com.br/ws',
            delay: 400,
            transport: (params, config) => {
              const cep = (params.term || '').replace(/\D/g, '');
              if (cep.length < 8) return Promise.resolve([]);

              const url = `${config.url}/${cep}/json/`;
              const abortController = new AbortController();

              const fetchPromise = fetch(url, {
                signal: abortController.signal
              })
                .then(response => {
                  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                  return response.json();
                })
                .then(data => {
                  if (data.erro) return [];
                  return [data];
                });

              fetchPromise.abort = () => abortController.abort();
              return fetchPromise;
            },
            processResults: (data) => {
              if (!Array.isArray(data) || data.length === 0) return { results: [] };

              const results = data.map(address => ({
                id: address.cep,
                text: `${address.cep} - ${address.logradouro}, ${address.bairro}`,
                cep: address.cep,
                logradouro: address.logradouro,
                bairro: address.bairro,
                localidade: address.localidade,
                uf: address.uf
              }));

              return { results };
            }
          },
          templateResult: (item) => {
            const div = document.createElement('div');
            div.innerHTML = `
              <div style="font-weight: 500;">üìÆ ${item.cep}</div>
              <div style="font-size: 13px; color: #666; margin-top: 4px;">
                ${item.logradouro}<br>
                ${item.bairro} - ${item.localidade}/${item.uf}
              </div>
            `;
            return div;
          },
          templateSelection: (item) => {
            return `üìÆ ${item.cep}`;
          }
        });

        document.getElementById('cep').addEventListener('vs:select', (e) => {
          const resultDiv = document.getElementById('cep-result');
          const dataDiv = document.getElementById('cep-data');
          resultDiv.style.display = 'block';
          dataDiv.textContent = JSON.stringify(e.detail.data, null, 2);
        });

        // Example 3: Simulated Movie Search
        const moviesDatabase = [
          { id: 1, title: 'The Shawshank Redemption', year: 1994, genre: 'Drama', rating: 9.3 },
          { id: 2, title: 'The Godfather', year: 1972, genre: 'Crime', rating: 9.2 },
          { id: 3, title: 'The Dark Knight', year: 2008, genre: 'Action', rating: 9.0 },
          { id: 4, title: 'Pulp Fiction', year: 1994, genre: 'Crime', rating: 8.9 },
          { id: 5, title: 'Forrest Gump', year: 1994, genre: 'Drama', rating: 8.8 },
          { id: 6, title: 'Inception', year: 2010, genre: 'Sci-Fi', rating: 8.8 },
          { id: 7, title: 'The Matrix', year: 1999, genre: 'Sci-Fi', rating: 8.7 },
          { id: 8, title: 'Interstellar', year: 2014, genre: 'Sci-Fi', rating: 8.6 },
          { id: 9, title: 'The Lord of the Rings', year: 2001, genre: 'Fantasy', rating: 8.9 },
          { id: 10, title: 'Star Wars', year: 1977, genre: 'Sci-Fi', rating: 8.6 }
        ];

        const moviesSelect = new VanillaSmartSelectClass('#movies', {
          placeholder: 'Digite para buscar filmes...',
          allowClear: true,
          ajax: {
            delay: 300,
            transport: (params) => {
              return new Promise((resolve) => {
                setTimeout(() => {
                  const term = (params.term || '').toLowerCase();
                  const filtered = moviesDatabase.filter(movie =>
                    movie.title.toLowerCase().includes(term)
                  );
                  resolve(filtered);
                }, 500);
              });
            },
            processResults: (data) => {
              const results = data.map(movie => ({
                id: movie.id,
                text: movie.title,
                year: movie.year,
                genre: movie.genre,
                rating: movie.rating
              }));
              return { results };
            }
          },
          templateResult: (item) => {
            const div = document.createElement('div');
            div.innerHTML = `
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                  <div style="font-weight: 500;">üé¨ ${item.text}</div>
                  <div style="font-size: 12px; color: #666; margin-top: 2px;">
                    ${item.year} ‚Ä¢ ${item.genre}
                  </div>
                </div>
                <div style="background: #ffc107; color: #000; padding: 4px 8px; border-radius: 4px; font-weight: 600; font-size: 12px;">
                  ‚≠ê ${item.rating}
                </div>
              </div>
            `;
            return div;
          },
          templateSelection: (item) => {
            return `üé¨ ${item.text} (${item.year})`;
          }
        });

        document.getElementById('movies').addEventListener('vs:select', (e) => {
          const resultDiv = document.getElementById('movie-result');
          const dataDiv = document.getElementById('movie-data');
          resultDiv.style.display = 'block';
          dataDiv.textContent = JSON.stringify(e.detail.data, null, 2);
        });

        // Example 4: Headers Customizados (simulado localmente)
        const authDatabase = [
          { id: 1, name: 'Usu√°rio Premium - Jo√£o Silva' },
          { id: 2, name: 'Usu√°rio Premium - Maria Santos' },
          { id: 3, name: 'Usu√°rio Premium - Pedro Oliveira' },
          { id: 4, name: 'Usu√°rio Premium - Ana Costa' },
          { id: 5, name: 'Usu√°rio Premium - Carlos Ferreira' }
        ];

        const authSelect = new VanillaSmartSelectClass('#auth-api', {
          placeholder: 'Buscar dados autenticados...',
          allowClear: true,
          ajax: {
            delay: 300,
            transport: (params) => {
              // Simula uma API com autentica√ß√£o
              return new Promise((resolve) => {
                setTimeout(() => {
                  const term = (params.term || '').toLowerCase();
                  const filtered = authDatabase.filter(user =>
                    user.name.toLowerCase().includes(term)
                  );
                  resolve({ results: filtered });
                }, 400);
              });
            },
            processResults: (data) => {
              return {
                results: data.results.map(item => ({
                  id: item.id,
                  text: item.name
                }))
              };
            }
          },
          templateResult: (item) => {
            const div = document.createElement('div');
            div.innerHTML = `
              <div style="display: flex; align-items: center; gap: 10px;">
                <span style="background: #51cf66; color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px; font-weight: 600;">
                  üîê AUTH
                </span>
                <span>${item.text}</span>
              </div>
            `;
            return div;
          }
        });

        document.getElementById('auth-api').addEventListener('vs:select', (e) => {
          const resultDiv = document.getElementById('auth-result');
          const dataDiv = document.getElementById('auth-data');
          resultDiv.style.display = 'block';
          dataDiv.textContent = JSON.stringify(e.detail.data, null, 2);
        });

        // Example 5: Tratamento de Erros
        const errorSelect = new VanillaSmartSelectClass('#error-demo', {
          placeholder: 'Digite para testar erro de API...',
          allowClear: true,
          ajax: {
            url: 'https://api.invalid-domain-example-12345.com/search',
            delay: 300,
            transport: (params, config) => {
              const abortController = new AbortController();

              // Simula erro ap√≥s 1 segundo
              const fetchPromise = new Promise((resolve, reject) => {
                setTimeout(() => {
                  reject(new Error('Failed to fetch: A network error occurred. The domain does not exist or is unreachable.'));
                }, 1000);
              });

              fetchPromise.abort = () => abortController.abort();
              return fetchPromise;
            }
          }
        });

        const errorDemoElement = document.getElementById('error-demo');
        const errorLogDiv = document.getElementById('error-log');
        const errorMessageDiv = document.getElementById('error-message');
        const successLogDiv = document.getElementById('success-log');
        const successMessageDiv = document.getElementById('success-message');

        errorDemoElement.addEventListener('vs:ajaxLoading', (e) => {
          console.log('üîÑ Carregando...', e.detail);
          errorLogDiv.style.display = 'none';
          successLogDiv.style.display = 'none';
        });

        errorDemoElement.addEventListener('vs:ajaxSuccess', (e) => {
          console.log('‚úÖ Sucesso!', e.detail.data);
          errorLogDiv.style.display = 'none';
          successLogDiv.style.display = 'block';
          successMessageDiv.textContent = 'Dados carregados com sucesso!\n' + JSON.stringify(e.detail.data, null, 2);
        });

        errorDemoElement.addEventListener('vs:ajaxError', (e) => {
          console.error('‚ùå Erro ao carregar:', e.detail.error);
          successLogDiv.style.display = 'none';
          errorLogDiv.style.display = 'block';
          errorMessageDiv.textContent = `${e.detail.error.message}\n\nEste √© um exemplo de como capturar e exibir erros de requisi√ß√µes AJAX.`;
        });

        // Log AJAX events
        document.querySelectorAll('select').forEach(select => {
          select.addEventListener('vs:ajaxLoading', (e) => {
            console.log('üîÑ AJAX Loading:', e.detail);
          });

          select.addEventListener('vs:ajaxSuccess', (e) => {
            console.log('‚úÖ AJAX Success:', e.detail);
          });

          select.addEventListener('vs:ajaxError', (e) => {
            console.error('‚ùå AJAX Error:', e.detail);
          });
        });

        console.log('‚úì AJAX B√°sico - Todos os 5 exemplos inicializados!');

      } catch (error) {
        console.error('‚ùå Initialization error:', error);
      }
    });
  </script>
</body>
</html>
