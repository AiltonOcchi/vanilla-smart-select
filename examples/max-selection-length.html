<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vanilla Smart Select - maxSelectionLength</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .example {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }
    h1 {
      color: #333;
      margin-top: 0;
    }
    h2 {
      color: #666;
      font-size: 18px;
      margin-top: 0;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #555;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .note {
      background: #e7f3ff;
      border: 1px solid #007bff;
      padding: 12px;
      border-radius: 4px;
      margin-top: 20px;
    }
    .warning {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 12px;
      border-radius: 4px;
      margin-top: 20px;
    }
    .info {
      background: #d1ecf1;
      border: 1px solid #17a2b8;
      padding: 12px;
      border-radius: 4px;
      margin-top: 20px;
      font-size: 14px;
    }
  </style>
  <link rel="stylesheet" href="../dist/vanilla-smart-select.css">
  <script src="../dist/vanilla-smart-select.js"></script>
</head>
<body>
  <h1>maxSelectionLength - Limite de Seleção</h1>

  <div class="example">
    <h2>1. Limite de 3 Itens</h2>
    <p style="color: #666;">
      Este select permite selecionar no máximo 3 itens. Quando o limite é atingido,
      uma mensagem é exibida e novas seleções são bloqueadas.
    </p>

    <div class="form-group">
      <label for="skills">Selecione até 3 habilidades:</label>
      <select id="skills" multiple>
        <option value="js">JavaScript</option>
        <option value="py">Python</option>
        <option value="java">Java</option>
        <option value="cpp">C++</option>
        <option value="rust">Rust</option>
        <option value="go">Go</option>
        <option value="php">PHP</option>
        <option value="ruby">Ruby</option>
        <option value="swift">Swift</option>
        <option value="kotlin">Kotlin</option>
      </select>
    </div>

    <div class="note">
      <strong>Como funciona:</strong><br>
      - Tente selecionar mais de 3 itens<br>
      - Uma mensagem aparecerá quando o limite for atingido<br>
      - A mensagem desaparece automaticamente após 3 segundos<br>
      - Remove um item para poder adicionar outro
    </div>
  </div>

  <div class="example">
    <h2>2. Limite de 2 Itens</h2>
    <p style="color: #666;">
      Exemplo com limite mais restritivo de apenas 2 seleções.
    </p>

    <div class="form-group">
      <label for="frameworks">Selecione até 2 frameworks:</label>
      <select id="frameworks" multiple>
        <option value="react">React</option>
        <option value="vue">Vue.js</option>
        <option value="angular">Angular</option>
        <option value="svelte">Svelte</option>
        <option value="nextjs">Next.js</option>
        <option value="nuxt">Nuxt.js</option>
      </select>
    </div>
  </div>

  <div class="example">
    <h2>3. Limite de 5 Itens com Grupos</h2>
    <p style="color: #666;">
      maxSelectionLength também funciona com optgroups.
    </p>

    <div class="form-group">
      <label for="countries">Selecione até 5 países:</label>
      <select id="countries" multiple>
        <optgroup label="América do Norte">
          <option value="us">Estados Unidos</option>
          <option value="ca">Canadá</option>
          <option value="mx">México</option>
        </optgroup>
        <optgroup label="América do Sul">
          <option value="br">Brasil</option>
          <option value="ar">Argentina</option>
          <option value="cl">Chile</option>
          <option value="co">Colômbia</option>
        </optgroup>
        <optgroup label="Europa">
          <option value="uk">Reino Unido</option>
          <option value="fr">França</option>
          <option value="de">Alemanha</option>
          <option value="it">Itália</option>
          <option value="es">Espanha</option>
        </optgroup>
        <optgroup label="Ásia">
          <option value="jp">Japão</option>
          <option value="cn">China</option>
          <option value="kr">Coreia do Sul</option>
          <option value="in">Índia</option>
        </optgroup>
      </select>
    </div>
  </div>

  <div class="example">
    <h2>4. Sem Limite (Padrão)</h2>
    <p style="color: #666;">
      Quando <code>maximumSelectionLength: 0</code> (padrão), não há limite de seleção.
    </p>

    <div class="form-group">
      <label for="colors">Selecione quantas cores quiser:</label>
      <select id="colors" multiple>
        <option value="red">Vermelho</option>
        <option value="blue">Azul</option>
        <option value="green">Verde</option>
        <option value="yellow">Amarelo</option>
        <option value="purple">Roxo</option>
        <option value="orange">Laranja</option>
        <option value="pink">Rosa</option>
        <option value="brown">Marrom</option>
      </select>
    </div>

    <div class="info">
      <strong>Dica:</strong> Compare este exemplo (sem limite) com os anteriores (com limite)
      para ver a diferença de comportamento.
    </div>
  </div>

  <div class="example">
    <h2>5. Escutando o Evento de Limite Atingido</h2>
    <p style="color: #666;">
      Você pode escutar o evento <code>vs:selectionLimitReached</code> para executar
      ações customizadas quando o limite for atingido.
    </p>

    <div class="form-group">
      <label for="tags">Selecione até 4 tags:</label>
      <select id="tags" multiple>
        <option value="frontend">Frontend</option>
        <option value="backend">Backend</option>
        <option value="database">Database</option>
        <option value="devops">DevOps</option>
        <option value="mobile">Mobile</option>
        <option value="desktop">Desktop</option>
        <option value="web">Web</option>
        <option value="api">API</option>
      </select>
    </div>

    <div id="event-log" style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 12px; margin-top: 15px; font-family: monospace; font-size: 13px; min-height: 50px;">
      <div style="color: #999;">Os eventos aparecerão aqui...</div>
    </div>

    <div class="note" style="margin-top: 15px;">
      <strong>Código do evento:</strong>
      <pre style="background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; margin-top: 8px;"><code>element.addEventListener('vs:selectionLimitReached', (e) => {
  console.log('Limite atingido!');
  console.log('Máximo:', e.detail.maximum);
  console.log('Mensagem:', e.detail.message);
});</code></pre>
    </div>
  </div>

  <div class="example">
    <h2>Resumo da API</h2>
    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px;">
      <h3 style="margin-top: 0;">Configuração:</h3>
      <pre style="background: white; padding: 10px; border-radius: 4px; overflow-x: auto;"><code>new VanillaSmartSelect('#mySelect', {
  multiple: true,
  maximumSelectionLength: 3  // 0 = sem limite (padrão)
});</code></pre>

      <h3 style="margin-top: 20px;">Evento:</h3>
      <pre style="background: white; padding: 10px; border-radius: 4px; overflow-x: auto;"><code>element.addEventListener('vs:selectionLimitReached', (e) => {
  // e.detail.maximum - número máximo permitido
  // e.detail.message - mensagem de erro
});</code></pre>

      <h3 style="margin-top: 20px;">Mensagem Customizada (i18n):</h3>
      <pre style="background: white; padding: 10px; border-radius: 4px; overflow-x: auto;"><code>new VanillaSmartSelect('#mySelect', {
  multiple: true,
  maximumSelectionLength: 3,
  language: {
    maximumSelected: (args) =>
      `Você só pode selecionar ${args.maximum} itens!`
  }
});</code></pre>
    </div>
  </div>

  <script>
    const VanillaSmartSelectClass = VanillaSmartSelect.default || VanillaSmartSelect;

    // Example 1: Limite de 3 itens
    new VanillaSmartSelectClass('#skills', {
      searchable: true,
      maximumSelectionLength: 3
    });

    // Example 2: Limite de 2 itens
    new VanillaSmartSelectClass('#frameworks', {
      searchable: true,
      maximumSelectionLength: 2
    });

    // Example 3: Limite de 5 itens com grupos
    new VanillaSmartSelectClass('#countries', {
      searchable: true,
      maximumSelectionLength: 5
    });

    // Example 4: Sem limite (padrão)
    new VanillaSmartSelectClass('#colors', {
      searchable: true,
      maximumSelectionLength: 0  // 0 = unlimited (default)
    });

    // Example 5: Com event listener
    const tagsElement = document.getElementById('tags');
    const eventLog = document.getElementById('event-log');

    new VanillaSmartSelectClass('#tags', {
      searchable: true,
      maximumSelectionLength: 4
    });

    // Listen to selection limit reached event
    tagsElement.addEventListener('vs:selectionLimitReached', (e) => {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.style.marginBottom = '8px';
      logEntry.innerHTML = `
        <strong style="color: #856404;">[${timestamp}] Limite Atingido!</strong><br>
        <span style="color: #666;">Máximo: ${e.detail.maximum} | Mensagem: "${e.detail.message}"</span>
      `;

      // Clear placeholder if present
      const placeholder = eventLog.querySelector('div[style*="color: #999"]');
      if (placeholder) {
        placeholder.remove();
      }

      eventLog.insertBefore(logEntry, eventLog.firstChild);
    });

    // Also log other events for comparison
    tagsElement.addEventListener('vs:select', (e) => {
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = document.createElement('div');
      logEntry.style.marginBottom = '8px';
      logEntry.innerHTML = `
        <strong style="color: #28a745;">[${timestamp}] Selecionado:</strong>
        <span style="color: #666;">${e.detail.data.text}</span>
      `;

      const placeholder = eventLog.querySelector('div[style*="color: #999"]');
      if (placeholder) {
        placeholder.remove();
      }

      eventLog.insertBefore(logEntry, eventLog.firstChild);
    });

    console.log('✓ maxSelectionLength examples ready!');
  </script>
</body>
</html>
